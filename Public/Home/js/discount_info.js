define([],function(){var a={discountType:{DISCOUNT_TYPE_DISC_START:1,DISCOUNT_TYPE_DISC_END:2,DISCOUNT_TYPE_PRICE_START:3,DISCOUNT_TYPE_PRICE_END:4,DISCOUNT_TYPE_CUSTOM:5},getDiscountTypeString:function(c){var b="";if(c==this.discountType.DISCOUNT_TYPE_DISC_START){b="折起"}else{if(c==this.discountType.DISCOUNT_TYPE_DISC_END){b="折封顶"}else{if(c==this.discountType.DISCOUNT_TYPE_PRICE_START){b="元起"}else{if(c==this.discountType.DISCOUNT_TYPE_PRICE_END){b="元封顶"}else{if(c==this.discountType.DISCOUNT_TYPE_CUSTOM){b="折"}}}}}return b},getDiscountNum:function(d){var b=d;if(b){if(b.indexOf("~")!=-1||b.indexOf("-")!=-1){var c=[];var c=[];if(b.contains("~")){c=b.split("~")}else{c=b.split("-")}if((c!=null)&&(c.length!=0)&&(c[0].equals(c[1]))){b=c[0]}}if(b.indexOf(".0")!=-1){b=b.replace(".0","")}return b}return""
},refreshActivityDiscount:function(f){var m=f.mingpinActivityList;for(var h=0;h<m.length;h++){var q=m[h];var c=q.id;var p=q.discountInfo;var g=q.discountType;var n=a.getDiscountNum(p);var e=a.getDiscountTypeString(g);var k="#zxmp_"+c;if($(k).length>0){var j=("<strong>"+n+"</strong>"+e);$(k+" .discountstr").html(j)}}var d=f.mingpinActivitySaleDataVoList;for(var h=0;h<d.length;h++){var q=d[h];var c=q.activityId;var o=q.saleNum;var k="#zxmp_"+c;if($(k).length>0){var b=$(k).attr("isStarted");var l="";if(b=="false"){l="即将开始"}else{if(o>0){l=(o+"人已购买")}else{l="立即抢购"}}$(k+" .saleNum").html(l)}}},getActivityDiscountByActivityIds:function(b){if(b.length>0){$.ajax({url:"/mingpinAjax/findMingpinActivityDiscountInfoByActivityIds.do",data:{activityIds:b},type:"POST",async:true,dataType:"json",traditional:true,success:function(c){if(!c){return
}a.refreshActivityDiscount(c)}})}}};return a});