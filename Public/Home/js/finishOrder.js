/* SVN.committedRevision=1559019 */
(function(b){}(function(t){var s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],m=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice,n,u;if(t.event.fixHooks){for(var r=s.length;r;){t.event.fixHooks[s[--r]]=t.event.mouseHooks}}var q=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var a=m.length;a;){this.addEventListener(m[--a],i,false)}}else{this.onmousewheel=i}t.data(this,"mousewheel-line-height",q.getLineHeight(this));t.data(this,"mousewheel-page-height",q.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=m.length;a;){this.removeEventListener(m[--a],i,false)}}else{this.onmousewheel=null}},getLineHeight:function(a){return parseInt(t(a)["offsetParent" in t.fn?"offsetParent":"parent"]().css("fontSize"),10)
},getPageHeight:function(a){return t(a).height()},settings:{adjustOldDeltas:true}};t.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});function i(g){var e=g||window.event,a=o.call(arguments,1),h=0,c=0,d=0,b=0;g=t.event.fix(e);g.type="mousewheel";if("detail" in e){d=e.detail*-1}if("wheelDelta" in e){d=e.wheelDelta}if("wheelDeltaY" in e){d=e.wheelDeltaY}if("wheelDeltaX" in e){c=e.wheelDeltaX*-1}if("axis" in e&&e.axis===e.HORIZONTAL_AXIS){c=d*-1;d=0}h=d===0?c:d;if("deltaY" in e){d=e.deltaY*-1;h=d}if("deltaX" in e){c=e.deltaX;if(d===0){h=c*-1}}if(d===0&&c===0){return}if(e.deltaMode===1){var j=t.data(this,"mousewheel-line-height");h*=j;d*=j;c*=j}else{if(e.deltaMode===2){var f=t.data(this,"mousewheel-page-height");
h*=f;d*=f;c*=f}}b=Math.max(Math.abs(d),Math.abs(c));if(!u||b<u){u=b;if(v(e,b)){u/=40}}if(v(e,b)){h/=40;c/=40;d/=40}h=Math[h>=1?"floor":"ceil"](h/u);c=Math[c>=1?"floor":"ceil"](c/u);d=Math[d>=1?"floor":"ceil"](d/u);g.deltaX=c;g.deltaY=d;g.deltaFactor=u;g.deltaMode=0;a.unshift(g,h,c,d);if(n){clearTimeout(n)}n=setTimeout(p,200);return(t.event.dispatch||t.event.handle).apply(this,a)}function p(){u=null}function v(a,b){return q.settings.adjustOldDeltas&&a.type==="mousewheel"&&b%120===0}}));!function(b,c,a){b.fn.jScrollPane=function(d){function e(an,ap){function aq(aF){var aG,aH,aI,aA,aB,aC,aD=!1,aE=!1;if(Z=aF,ab===a){aB=an.scrollTop(),aC=an.scrollLeft(),an.css({overflow:"hidden",padding:0}),ac=an.innerWidth()+t,ad=an.innerHeight(),an.width(ac),ab=b('<div class="jspPane" />').css("padding",m).append(an.children()),ae=b('<div class="jspContainer" />').css({width:ac+"px",height:ad+"px"}).append(ab).appendTo(an)}else{if(an.css("width",""),aD=Z.stickToBottom&&w(),aE=Z.stickToRight&&x(),aA=an.innerWidth()+t!=ac||an.outerHeight()!=ad,aA&&(ac=an.innerWidth()+t,ad=an.innerHeight(),ae.css({width:ac+"px",height:ad+"px"})),!aA&&am==af&&ab.outerHeight()==ag){return an.width(ac),void 0}am=af,ab.css("width",""),an.width(ac),ae.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}ab.css("overflow","auto"),af=aF.contentWidth?aF.contentWidth:ab[0].scrollWidth,ag=ab[0].scrollHeight,ab.css("overflow",""),ah=af/ac,ai=ag/ad,aj=ai>1,ak=ah>1,ak||aj?(an.addClass("jspScrollable"),aG=Z.maintainPosition&&(r||S),aG&&(aH=u(),aI=v()),ar(),au(),ax(),aG&&(N(aE?af-ac:aH,!1),M(aD?ag-ad:aI,!1)),aY(),y(),X(),Z.enableKeyboardNavigation&&a0(),Z.clickOnTrack&&D(),bc(),Z.hijackInternalLinks&&f()):(an.removeClass("jspScrollable"),ab.css({top:0,left:0,width:ae.width()-t}),az(),aZ(),bb(),E()),Z.autoReinitialise&&!h?h=setInterval(function(){aq(Z)
},Z.autoReinitialiseDelay):!Z.autoReinitialise&&h&&clearInterval(h),aB&&an.scrollTop(0)&&M(aB,!1),aC&&an.scrollLeft(0)&&N(aC,!1),an.trigger("jsp-initialised",[ak||aj])}function ar(){aj&&(ae.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),W=ae.find(">.jspVerticalBar"),k=W.find(">.jspTrack"),n=k.find(">.jspDrag"),Z.showArrows&&(R=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",A(0,-1)).bind("click.jsp",aX),V=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",A(0,1)).bind("click.jsp",aX),Z.arrowScrollOnHover&&(R.bind("mouseover.jsp",A(0,-1,R)),V.bind("mouseover.jsp",A(0,1,V))),z(k,Z.verticalArrowPositions,R,V)),ba=ad,ae.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ba-=b(this).outerHeight()
}),n.hover(function(){n.addClass("jspHover")},function(){n.removeClass("jspHover")}).bind("mousedown.jsp",function(aB){b("html").bind("dragstart.jsp selectstart.jsp",aX),n.addClass("jspActive");var aA=aB.pageY-n.position().top;return b("html").bind("mousemove.jsp",function(aC){G(aC.pageY-aA,!1)}).bind("mouseup.jsp mouseleave.jsp",F),!1}),at())}function at(){k.height(ba+"px"),r=0,q=Z.verticalGutter+k.outerWidth(),ab.width(ac-q-t);try{0===W.position().left&&ab.css("margin-left",q+"px")}catch(aA){}}function au(){ak&&(ae.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />'))),i=ae.find(">.jspHorizontalBar"),o=i.find(">.jspTrack"),aa=o.find(">.jspDrag"),Z.showArrows&&(Q=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",A(-1,0)).bind("click.jsp",aX),U=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",A(1,0)).bind("click.jsp",aX),Z.arrowScrollOnHover&&(Q.bind("mouseover.jsp",A(-1,0,Q)),U.bind("mouseover.jsp",A(1,0,U))),z(o,Z.horizontalArrowPositions,Q,U)),aa.hover(function(){aa.addClass("jspHover")
},function(){aa.removeClass("jspHover")}).bind("mousedown.jsp",function(aB){b("html").bind("dragstart.jsp selectstart.jsp",aX),aa.addClass("jspActive");var aA=aB.pageX-aa.position().left;return b("html").bind("mousemove.jsp",function(aC){I(aC.pageX-aA,!1)}).bind("mouseup.jsp mouseleave.jsp",F),!1}),ay=ae.innerWidth(),aw())}function aw(){ae.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ay-=b(this).outerWidth()}),o.width(ay+"px"),S=0}function ax(){if(ak&&aj){var aB=o.outerHeight(),aA=k.outerWidth();ba-=aB,b(i).find(">.jspCap:visible,>.jspArrow").each(function(){ay+=b(this).outerWidth()}),ay-=aA,ad-=aA,ac-=aB,o.parent().append(b('<div class="jspCorner" />').css("width",aB+"px")),at(),aw()}ak&&ab.width(ae.outerWidth()-t+"px"),ag=ab.outerHeight(),ai=ag/ad,ak&&(ao=Math.ceil(1/ah*ay),ao>Z.horizontalDragMaxWidth?ao=Z.horizontalDragMaxWidth:ao<Z.horizontalDragMinWidth&&(ao=Z.horizontalDragMinWidth),aa.width(ao+"px"),C=ay-ao,J(S)),aj&&(av=Math.ceil(1/ai*ba),av>Z.verticalDragMaxHeight?av=Z.verticalDragMaxHeight:av<Z.verticalDragMinHeight&&(av=Z.verticalDragMinHeight),n.height(av+"px"),al=ba-av,H(r))
}function z(aE,aF,aG,aA){var aB,aC="before",aD="after";"os"==aF&&(aF=/Mac/.test(navigator.platform)?"after":"split"),aF==aC?aD=aF:aF==aD&&(aC=aF,aB=aG,aG=aA,aA=aB),aE[aC](aG)[aD](aA)}function A(aB,aC,aA){return function(){return B(aB,aC,this,aA),this.blur(),!1}}function B(aD,aE,aF,aG){aF=b(aF).addClass("jspActive");var aH,aA,aB=!0,aC=function(){0!==aD&&P.scrollByX(aD*Z.arrowButtonSpeed),0!==aE&&P.scrollByY(aE*Z.arrowButtonSpeed),aA=setTimeout(aC,aB?Z.initialDelay:Z.arrowRepeatFreq),aB=!1};aC(),aH=aG?"mouseout.jsp":"mouseup.jsp",aG=aG||b("html"),aG.bind(aH,function(){aF.removeClass("jspActive"),aA&&clearTimeout(aA),aA=null,aG.unbind(aH)})}function D(){E(),aj&&k.bind("mousedown.jsp",function(aC){if(aC.originalTarget===a||aC.originalTarget==aC.currentTarget){var aD,aE=b(this),aF=aE.offset(),aG=aC.pageY-aF.top-r,aH=!0,aA=function(){var aL=aE.offset(),aI=aC.pageY-aL.top-av/2,aJ=ad*Z.scrollPagePercent,aK=al*aJ/(ag-ad);
if(0>aG){r-aK>aI?P.scrollByY(-aJ):G(aI)}else{if(!(aG>0)){return aB(),void 0}aI>r+aK?P.scrollByY(aJ):G(aI)}aD=setTimeout(aA,aH?Z.initialDelay:Z.trackClickRepeatFreq),aH=!1},aB=function(){aD&&clearTimeout(aD),aD=null,b(document).unbind("mouseup.jsp",aB)};return aA(),b(document).bind("mouseup.jsp",aB),!1}}),ak&&o.bind("mousedown.jsp",function(aC){if(aC.originalTarget===a||aC.originalTarget==aC.currentTarget){var aD,aE=b(this),aF=aE.offset(),aG=aC.pageX-aF.left-S,aH=!0,aA=function(){var aL=aE.offset(),aI=aC.pageX-aL.left-ao/2,aJ=ac*Z.scrollPagePercent,aK=C*aJ/(af-ac);if(0>aG){S-aK>aI?P.scrollByX(-aJ):I(aI)}else{if(!(aG>0)){return aB(),void 0}aI>S+aK?P.scrollByX(aJ):I(aI)}aD=setTimeout(aA,aH?Z.initialDelay:Z.trackClickRepeatFreq),aH=!1},aB=function(){aD&&clearTimeout(aD),aD=null,b(document).unbind("mouseup.jsp",aB)
};return aA(),b(document).bind("mouseup.jsp",aB),!1}})}function E(){o&&o.unbind("mousedown.jsp"),k&&k.unbind("mousedown.jsp")}function F(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),n&&n.removeClass("jspActive"),aa&&aa.removeClass("jspActive")}function G(aA,aB){aj&&(0>aA?aA=0:aA>al&&(aA=al),aB===a&&(aB=Z.animateScroll),aB?P.animate(n,"top",aA,H):(n.css("top",aA),H(aA)))}function H(aD){aD===a&&(aD=n.position().top),ae.scrollTop(0),r=aD;var aE=0===r,aA=r==al,aB=aD/al,aC=-aB*(ag-ad);(T!=aE||l!=aA)&&(T=aE,l=aA,an.trigger("jsp-arrow-change",[T,l,g,s])),K(aE,aA),ab.css("top",aC),an.trigger("jsp-scroll-y",[-aC,aE,aA]).trigger("scroll")}function I(aA,aB){ak&&(0>aA?aA=0:aA>C&&(aA=C),aB===a&&(aB=Z.animateScroll),aB?P.animate(aa,"left",aA,J):(aa.css("left",aA),J(aA)))
}function J(aD){aD===a&&(aD=aa.position().left),ae.scrollTop(0),S=aD;var aE=0===S,aA=S==C,aB=aD/C,aC=-aB*(af-ac);(g!=aE||s!=aA)&&(g=aE,s=aA,an.trigger("jsp-arrow-change",[T,l,g,s])),L(aE,aA),ab.css("left",aC),an.trigger("jsp-scroll-x",[-aC,aE,aA]).trigger("scroll")}function K(aA,aB){Z.showArrows&&(R[aA?"addClass":"removeClass"]("jspDisabled"),V[aB?"addClass":"removeClass"]("jspDisabled"))}function L(aA,aB){Z.showArrows&&(Q[aA?"addClass":"removeClass"]("jspDisabled"),U[aB?"addClass":"removeClass"]("jspDisabled"))}function M(aB,aC){var aA=aB/(ag-ad);G(aA*al,aC)}function N(aB,aC){var aA=aB/(af-ac);I(aA*C,aC)}function O(aO,aB,aD){var aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN=0,aA=0;try{aE=b(aO)}catch(aC){return}for(aF=aE.outerHeight(),aG=aE.outerWidth(),ae.scrollTop(0),ae.scrollLeft(0);!aE.is(".jspPane");){if(aN+=aE.position().top,aA+=aE.position().left,aE=aE.offsetParent(),/^body|html$/i.test(aE[0].nodeName)){return
}}aH=v(),aJ=aH+ad,aH>aN||aB?aL=aN-Z.horizontalGutter:aN+aF>aJ&&(aL=aN-ad+aF+Z.horizontalGutter),isNaN(aL)||M(aL,aD),aI=u(),aK=aI+ac,aI>aA||aB?aM=aA-Z.horizontalGutter:aA+aG>aK&&(aM=aA-ac+aG+Z.horizontalGutter),isNaN(aM)||N(aM,aD)}function u(){return -ab.position().left}function v(){return -ab.position().top}function w(){var aA=ag-ad;return aA>20&&aA-v()<10}function x(){var aA=af-ac;return aA>20&&aA-u()<10}function y(){ae.unbind(p).bind(p,function(aE,aF,aG,aA){var aB=S,aC=r,aD=aE.deltaFactor||Z.mouseWheelSpeed;return P.scrollBy(aG*aD,-aA*aD,!1),aB==S&&aC==r})}function az(){ae.unbind(p)}function aX(){return !1}function aY(){ab.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(aA){O(aA.target,!1)})}function aZ(){ab.find(":input,a").unbind("focus.jsp")}function a0(){function aD(){var aE=S,aF=r;
switch(aA){case 40:P.scrollByY(Z.keyboardSpeed,!1);break;case 38:P.scrollByY(-Z.keyboardSpeed,!1);break;case 34:case 32:P.scrollByY(ad*Z.scrollPagePercent,!1);break;case 33:P.scrollByY(-ad*Z.scrollPagePercent,!1);break;case 39:P.scrollByX(Z.keyboardSpeed,!1);break;case 37:P.scrollByX(-Z.keyboardSpeed,!1)}return aB=aE!=S||aF!=r}var aA,aB,aC=[];ak&&aC.push(i[0]),aj&&aC.push(W[0]),ab.focus(function(){an.focus()}),an.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(aE){if(aE.target===this||aC.length&&b(aE.target).closest(aC).length){var aF=S,aG=r;switch(aE.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:aA=aE.keyCode,aD();break;case 35:M(ag-ad),aA=null;break;case 36:M(0),aA=null}return aB=aE.keyCode==aA&&aF!=S||aG!=r,!aB}}).bind("keypress.jsp",function(aE){return aE.keyCode==aA&&aD(),!aB
}),Z.hideFocus?(an.css("outline","none"),"hideFocus" in ae[0]&&an.attr("hideFocus",!0)):(an.css("outline",""),"hideFocus" in ae[0]&&an.attr("hideFocus",!1))}function bb(){an.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function bc(){if(location.hash&&location.hash.length>1){var aD,aA,aB=escape(location.hash.substr(1));try{aD=b("#"+aB+', a[name="'+aB+'"]')}catch(aC){return}aD.length&&ab.find(aB)&&(0===ae.scrollTop()?aA=setInterval(function(){ae.scrollTop()>0&&(O(aD,!0),b(document).scrollTop(ae.position().top),clearInterval(aA))},50):(O(aD,!0),b(document).scrollTop(ae.position().top)))}}function f(){b(document.body).data("jspHijack")||(b(document.body).data("jspHijack",!0),b(document.body).delegate("a[href*=#]","click",function(aG){var aH,aI,aJ,aA,aB,aC,aD=this.href.substr(0,this.href.indexOf("#")),aE=location.href;
if(-1!==location.href.indexOf("#")&&(aE=location.href.substr(0,location.href.indexOf("#"))),aD===aE){aH=escape(this.href.substr(this.href.indexOf("#")+1));try{aI=b("#"+aH+', a[name="'+aH+'"]')}catch(aF){return}aI.length&&(aJ=aI.closest(".jspScrollable"),aA=aJ.data("jsp"),aA.scrollToElement(aI,!0),aJ[0].scrollIntoView&&(aB=b(c).scrollTop(),aC=aI.offset().top,(aB>aC||aC>aB+b(c).height())&&aJ[0].scrollIntoView()),aG.preventDefault())}}))}function X(){var aE,aF,aA,aB,aC,aD=!1;ae.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(aH){var aG=aH.originalEvent.touches[0];aE=u(),aF=v(),aA=aG.pageX,aB=aG.pageY,aC=!1,aD=!0}).bind("touchmove.jsp",function(aH){if(aD){var aI=aH.originalEvent.touches[0],aJ=S,aG=r;return P.scrollTo(aE+aA-aI.pageX,aF+aB-aI.pageY),aC=aC||Math.abs(aA-aI.pageX)>5||Math.abs(aB-aI.pageY)>5,aJ==S&&aG==r
}}).bind("touchend.jsp",function(){aD=!1}).bind("click.jsp-touchclick",function(){return aC?(aC=!1,!1):void 0})}function Y(){var aA=v(),aB=u();an.removeClass("jspScrollable").unbind(".jsp"),an.replaceWith(j.append(ab.children())),j.scrollTop(aA),j.scrollLeft(aB),h&&clearInterval(h)}var Z,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,n,al,r,aa,C,S,W,k,q,ba,av,R,V,i,o,ay,ao,Q,U,h,m,t,am,P=this,T=!0,g=!0,l=!1,s=!1,j=an.clone(!1,!1).empty(),p=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===an.css("box-sizing")?(m=0,t=0):(m=an.css("paddingTop")+" "+an.css("paddingRight")+" "+an.css("paddingBottom")+" "+an.css("paddingLeft"),t=(parseInt(an.css("paddingLeft"),10)||0)+(parseInt(an.css("paddingRight"),10)||0)),b.extend(P,{reinitialise:function(aA){aA=b.extend({},Z,aA),aq(aA)},scrollToElement:function(aB,aC,aA){O(aB,aC,aA)
},scrollTo:function(aB,aC,aA){N(aB,aA),M(aC,aA)},scrollToX:function(aA,aB){N(aA,aB)},scrollToY:function(aA,aB){M(aA,aB)},scrollToPercentX:function(aA,aB){N(aA*(af-ac),aB)},scrollToPercentY:function(aA,aB){M(aA*(ag-ad),aB)},scrollBy:function(aB,aC,aA){P.scrollByX(aB,aA),P.scrollByY(aC,aA)},scrollByX:function(aC,aD){var aA=u()+Math[0>aC?"floor":"ceil"](aC),aB=aA/(af-ac);I(aB*C,aD)},scrollByY:function(aC,aD){var aA=v()+Math[0>aC?"floor":"ceil"](aC),aB=aA/(ag-ad);G(aB*al,aD)},positionDragX:function(aA,aB){I(aA,aB)},positionDragY:function(aA,aB){G(aA,aB)},animate:function(aD,aE,aA,aB){var aC={};aC[aE]=aA,aD.animate(aC,{duration:Z.animateDuration,easing:Z.animateEase,queue:!1,step:aB})},getContentPositionX:function(){return u()},getContentPositionY:function(){return v()},getContentWidth:function(){return af
},getContentHeight:function(){return ag},getPercentScrolledX:function(){return u()/(af-ac)},getPercentScrolledY:function(){return v()/(ag-ad)},getIsScrollableH:function(){return ak},getIsScrollableV:function(){return aj},getContentPane:function(){return ab},scrollToBottom:function(aA){G(al,aA)},hijackInternalLinks:b.noop,destroy:function(){Y()}}),aq(ap)}return d=b.extend({},b.fn.jScrollPane.defaults,d),b.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){d[this]=d[this]||d.speed}),this.each(function(){var i=b(this),f=i.data("jsp");f?f.reinitialise(d):(b("script",i).filter('[type="text/javascript"],:not([type])').remove(),f=new e(i,d),i.data("jsp",f))})},b.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:a,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}
}(jQuery,this);var countDwonSecond=0,list_w=[];var payForwechat;function checkIsPayForWechat(){var b=jQuery("#finish_order_code").val();var a="/order/getPayStatusForWechat.do?orderCode="+b;jQuery.getJSON(a,function(c){if(c&&c.code){if(c.code==1){window.location.reload()}else{if(c.code==-1){window.clearInterval(payForwechat)}}}})}function navigatorLowerIe8(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("msie")<0){return false}var b=a.split("msie");return parseInt(b[1].split(";")[0])<=8}function getWechatDimension(){var b=document.getElementById("showWechatUrlForSaoma");if(b){var d=$("#showWechatUrlForSaoma").val();var c=document.getElementById("showWechatUrl");var a="width:198pxheight:198px;";c.style.cssText=a;var e="canvas";if(navigatorLowerIe8()){e="table"}if(d!=""){jQuery("#showWechatUrl").html("").qrcode({render:e,width:198,height:198,text:d})
}else{jQuery("#showWechatUrl").html("")}}}jQuery(document).ready(function(){getWechatDimension();jQuery.ajax({type:"post",async:false,url:"/order/isAjaxOrderFinishFunctionByConfig.do",success:function(g){var d=g.result;if(d==1){lazyloadOrderFinshOrderInfo();lazyloadOrderAddressEdit();getDimension();lazyloadOrderFinshAds();loadP4pInfo();try{require(["content_tracker_expo"],function(e){e.run("basefinishorderad","ad.dolphin.bidding")})}catch(f){}}}});payResult.main();if($(".mod_gift").length>0){lazyLoadTrialInfo();lazyLoadGbyInfo()}if($("#timeToDeadLineFastPay").length>0){var b=$("#isVoiceValidateOn").val();var c=$("#isVoiceSwitchOn").val();if(b=="true"&&c=="true"){$("#timeToDeadLineFastPay").html("获取语音验证码")}else{$("#timeToDeadLineFastPay").html("获取短信验证码")}$("#timeToDeadLineFastPay").bind("click",sendMsgFastPay)
}if($("#payFlag").length){gotracker("2",$("#payFlag").val())}var a=document.getElementById("showWechatUrlForSaoma");if(a){payForwechat=setInterval(checkIsPayForWechat,5000)}});function lazyloadOrderFinshAds(){var a=jQuery("#finish_order_code").val();jQuery.ajax({type:"post",async:false,url:"/order/finishOrderPageAds.do?orderCode="+a,dataType:"text",success:function(b){jQuery("#order_finish_content").append(b);if(typeof(_FirstOrderObject)!="undefined"){_FirstOrderObject.initFun()}}})}function lazyloadOrderFinshOrderInfo(){var a=jQuery("#finish_order_code").val();var b=jQuery("#finish_order_paymenttype").val();jQuery.ajax({type:"post",async:false,url:"/order/finishOrderPageInfo.do?orderCode="+a,dataType:"text",success:function(c){jQuery("#payment_type_"+b).append(c)}})}function lazyloadOrderAddressEdit(){var b=jQuery("#finish_order_code").val();
var d=jQuery("#bukai_flag").val();var a=jQuery("#invoice_flag").val();var c=jQuery(".pay_num .info");jQuery.ajax({type:"post",url:"/order/finishOrderAddressEdit.do?orderCode="+b,success:function(h){var f=h.result;if(d==0){if(f.addressEditable){var g="";if(f.orderPaymentSignal==1&&!f.isAlreadyVerify){g+=' <input type="hidden" id="isHaveVerify_'+f.orderId+'" value="0">';g+=" <a data-tpa=\"PC_ORDER_FINISH_EDIT_ADDRESS\" href=\"javascript:void(0)\" onclick=\"gotracker('2','MY_ORDERCOMPLETION_EDITADDRESS','0');alreadyPayOrderEditAddreValidate("+f.orderId+');" class="aBlu">修改收货地址</a>'}else{g+=" <a data-tpa=\"PC_ORDER_FINISH_EDIT_ADDRESS\" href=\"javascript:void(0)\" onclick=\"gotracker('2','MY_ORDERCOMPLETION_EDITADDRESS','0');popWinEditOrderDiv("+f.orderId+');" class="aBlu">修改收货地址</a>'}c.append(g)
}}if(d==1&&a==1){var g="";g+='<div id="btn_edit_info" class="edit_info">';g+='<h4 style="display: block;"><i class="icon_slect"></i>更多操作</h4>';g+='<ul style="display: none;">';if(f.addressEditable){g+="<li>";if(f.orderPaymentSignal==1&&!f.isAlreadyVerify){g+=' <input type="hidden" id="isHaveVerify_'+f.orderId+'" value="0">';g+=" <a href=\"javascript:void(0)\" onclick=\"gotracker('2','MY_ORDERCOMPLETION_EDITADDRESS','0');alreadyPayOrderEditAddreValidate("+f.orderId+');" class="aBlu">修改收货地址</a>'}else{g+=" <a href=\"javascript:void(0)\" onclick=\"gotracker('2','MY_ORDERCOMPLETION_EDITADDRESS','0');popWinEditOrderDiv("+f.orderId+');" class="aBlu">修改收货地址</a>'}g+="</li>"}if(!f.isNeedPay){g+=' <li><a href="/invoice/invoiceApply.do" class="aBlu" data-tpa="MYYHD_PC_ORDER_INVOICE_BUKAI" target="_blank" onclick="addTrackPositionToCookie(\'2\', \'MY_ORDERCOMPLETION_REINVOCIE\');">补开发票</a></li>'
}else{g+=' <li><a class="link_none" href="javascript:void(0);">补开发票 <span>您可在支付成功后补开发票</span></a></li>'}g+="</ul></div>";c.after(g)}var e=$("#btn_edit_info ul li");if(e.length>0){if(e.length==1){$("#btn_edit_info").find("h4").hide();$("#btn_edit_info").find("ul").show();$("#btn_edit_info").find("ul").css({border:"0px"})}else{$("#btn_edit_info").hover(function(){$(this).find("h4").hide();$(this).find("ul").show()},function(){$(this).find("h4").show();$(this).find("ul").hide()})}}}})}var payResult={gift:function(){function a(c,b){c.hover(function(){$(this).addClass(b)},function(){$(this).removeClass(b)})}a($(".mod_gift .test_pro"),"test_pro_hover");a($(".mod_gift .send_ticet"),"send_ticet_hover");a($(".mod_gift .surprise"),"surprise_hover")},payBox:function(){$(".mod_pay_result #btn_addr,.mod_pay_result .slide_box .btn_slide_down").toggle(function(){$(".mod_pay_result .slide_box .btn_slide_down").addClass("btn_slide_up").text("收起");
$(".mod_pay_result .cont_wrap").slideDown()},function(){$(".mod_pay_result .slide_box .btn_slide_down").removeClass("btn_slide_up").text("展开");$(".mod_pay_result .cont_wrap").slideUp()})},payBoxUp:function(){$(".mod_pay_result #btn_addr,.mod_pay_result .slide_box .btn_slide_up").toggle(function(){$(".mod_pay_result .slide_box .btn_slide_down").removeClass("btn_slide_up").text("展开");$(".mod_pay_result .cont_wrap").slideUp()},function(){$(".mod_pay_result .slide_box .btn_slide_down").addClass("btn_slide_up").text("收起");$(".mod_pay_result .cont_wrap").slideDown()})},changeBank:function(){if($("#pay_bank_box").length!==0){$(".mod_pay_result #pay_bank_box").click(function(){$("._payOrderBoxMsg").hide();$("#pay_bank_box").slideUp();$(".mod_pay_result .all_banks_box").slideDown(0)});function a(){var c=$(this).siblings("img").eq(0).attr("src");
var b=$(this).attr("data-tips");$(".mod_pay_result .all_banks_box").slideUp();$(".mod_pay_result .pay_bank img").eq(0).attr("src",c);$("#pay_bank_box").slideDown();$("#bankDataTips").text(b)}$(".mod_pay_result .pay_list input").change(a);$(".mod_pay_result .all_banks_box .btn_slide_up").click(a)}},editInfo:function(){},closePop:function(){$(".mod_popup_pay .mod_popup_pay_close").click(function(){$(this).parents(".mod_popup_pay").hide();$("#mask").hide()})},switchProduct:function(){$(".switch_box").each(function(){var c=0;var b=$(this).find(".pro_item");var a=b.length;$(this).find(".btn_pre").click(function(){c--;if(c<0){c=a-1}b.hide().eq(c).show()});$(this).find(".btn_next").click(function(){c++;if(c>a-1){c=0}b.hide().eq(c).show()})})},scaleTwoCode:function(){var a=$(".two_dimensional_code");
a.delegate(".code_bo_item","mouseenter",function(){var c=$(this),b=$(this).parent().parent().index(".two_dimensional_code"),d=$(this).index(".code_bo_item");a.eq(b).find(".code_font2").removeClass("code_font_hid").stop().animate({opacity:"0.23"});a.eq(b).find(".conde_bo_f").css({"padding-left":"0","padding-right":"0"});c.find(".code_font2").stop().animate({opacity:"1"}).addClass("code_font_hid");if(d%2==0){c.parent().find(".conde_bo_f").stop().animate({"padding-left":"30px"})}else{c.parent().find(".conde_bo_f").stop().animate({"padding-right":"30px"})}})},showPopup:function(a){var c=a.width();var e=a.height();var d=$(window).scrollTop();var b=$(window).height();if($.browser.msie&&parseInt($.browser.version)<=6){a.css({left:"50%",marginLeft:"-"+c/2+"px",top:(b-e)/2+d+"px",position:"absolute",zIndex:"99999"});
$(window).scroll(function(){a.css({top:(b-e)/2+$(window).scrollTop()+"px"})})}else{a.css({left:"50%",marginLeft:"-"+c/2+"px",top:(b-e)/2-40+"px",position:"fixed",zIndex:"99999"})}a.show()},closePopup:function(a,b){a.bind("click",function(){$(this).parents(b).hide();$("#mask").hide()})},changePay:function(){$(".all_banks_box input").change(function(a){if($(this).parents(".fast_pay").length>0){$(this).parents("li").siblings("li").removeClass("current");$(this).parents("li").addClass("current")}else{$(".all_banks_box .fast_pay li").removeClass("current")}})},moreSlogan:function(){$(".fast_pay .btn_more").click(function(){this.isOpen=!this.isOpen;if(this.isOpen){$(this).addClass("on").find("em").text("收起更多")}else{$(this).removeClass("on").find("em").text("展开更多")}a(this.isOpen)});function a(b){$(".fast_pay .pay_wrap li").each(function(c){if(b){$(this).show(300)
}else{if(c>=1){$(this).hide(300)}}})}},prizeBrought:function(){$(".pay_wrap > ul > li,.pay_kind > li").delegate(".limit","mouseenter",function(){$(this).css("zIndex",3).children(".limit_container").show()});$(".pay_wrap > ul > li,.pay_kind > li").delegate(".limit","mouseleave",function(){$(this).css("zIndex",2).children(".limit_container").hide()})},tSc:function(){$(".tb_scroll").each(function(){if($(this).height()>130){$(this).css({height:140}).jScrollPane({hideFocus:true})}})},wxtips:function(){$(".mb_pay .tips").bind({mouseover:function(){$(this).children(".p_tips").show()},mouseleave:function(){$(this).children(".p_tips").hide()}})},main:function(){var c=$("#bank_logo").attr("confirmGatewayCode");var b=$("input:radio[name='pay_bank1']:checked");var a=b.attr("confirmGatewayCode");payResult.gift();
payResult.payBox();payResult.payBoxUp();payResult.changeBank();payResult.closePop();payResult.switchProduct();payResult.scaleTwoCode();payResult.changePay();payResult.moreSlogan();payResult.prizeBrought();payResult.tSc();this.wxtips()}};function loadP4pInfo(){if($("#pUrl").length){var b=$("#pUrl").val();if(b.length>1){var a=URLPrefix.ad_ydt_yhd+b;$.getJSON(a+"&callback=?",function(k){if(k.status==1){if(k.value&&k.value.sourceList){var h=k.value.sourceList;if(h.length>4){$(".mod_hot_sale").show();if(k.value.extField1){$(".mod_hot_sale .title_bar a").attr("href",k.value.extField1)}else{$(".mod_hot_sale .title_bar a").text("")}var d="";var c=0;for(var f=0;f<h.length;f++){var j=h[f];var g;if(j.screenType==1){g=j.wideScreenImgUrl}else{g=j.commonScreenImgUrl}var e="<li><p class='pro_img'><a href='"+j.landingPage+"' data-tc='"+j.tc+"' data-tce='"+j.tc_ext+"' data-recordTracker='1'><img alt='"+j.productName+"' src='"+g+"'></a></p>";
e=e+"<p class='pro_name'><a href='"+j.landingPage+"'>"+j.productName+"</a></p>";e=e+"<p class='pro_price'>¥"+j.currentPrice+"</p></li>";$(".mod_hot_sale .content ul").append(e);if(j.biddingAdType>0&&j.biddingAdType<=3){d=d+","+j.ref.substring(3);c=1}}}}}})}}}function lazyLoadTrialInfo(){var a=$("#orderId").val();jQuery.ajax({type:"post",url:"/order/getTrialInfo.do",data:"orderId="+a+"&t="+new Date(),success:function(b){$("#trialCoupon").html(b);if($("#trialCoupon .cont_box").length>0){$("#trialCoupon").addClass("test_pro").addClass("switch_box")}payResult.main()}})}function lazyLoadGbyInfo(){var a=$("#orderId").val();jQuery.ajax({type:"post",url:"/order/getGbyInfo.do",data:"orderId="+a+"&t="+new Date(),success:function(b){$("#gbyCoupon").html(b);if($("#gbyCoupon .cont_box").length>0){$("#gbyCoupon").addClass("surprise").addClass("switch_box")
}payResult.main()}})}function changePayGateway(f,a,e,d){$("._payOrderBoxMsg").show();var b="/order/changePaymentForFinishOrder.do?gatewayCode="+f+"&orderId="+a+"&paySignId="+e+"&paySignNo="+d;var g=$("#pay_shaoma_input_alipayPayCode").val();var c=$("#pay_shaoma_input_wechatPayCode").val();if(f!=c&&payForwechat){window.clearInterval(payForwechat)}$("#pay_shaoma_iframe").html("");$("#showWechatUrl").html("");jQuery.getJSON(b,function(l){if(l){if(l.rCode==-1){yhdLogin();return false}else{if(l.rCode==1){$("input:radio[name='pay_bank1']").prop("checked",false);var n;if(e!=""&&e>0){n=$("#bank_a_"+f+"_"+e);$("#bank_logo").attr("confirmPaySignId",n.attr("confirmPaySignId"));$("#bank_logo").attr("signNo",n.attr("signNo"))}else{n=$("#chooseG_"+f);$("#bank_logo").attr("confirmPaySignId","");$("#bank_logo").attr("signNo","")
}n.prop("checked","checked");$("#bank_logo").attr("src",n.attr("gatewayPic"));$("#bank_logo").attr("title",n.attr("gatewayName"));$("#bank_logo").attr("confirmGatewayCode",n.attr("confirmGatewayCode"));$("#bank_logo").attr("bankType",n.attr("bankType"));$("#bankDataTips").text(n.attr("gatewayName"));$(".mod_pay_result .all_banks_box").slideUp();$(".mod_pay_result #pay_bank_box").slideDown(0);if(l.alipaySign==1&&f&&e==""&&f==g){if(l.saomaSign==1){$("#pay_shaoma_iframe").html("<iframe scrolling='no' frameborder='0' src='"+l.saomaUrl+"'></iframe>")}$("#pay_shaoma_div").show()}else{$("#pay_shaoma_div").hide()}if(l.wechatSign==1&&f&&e==""&&f==c){if(l.wechatUrl!=""){var i=l.wechatUrl;var h="width:198pxheight:198px;";var k=document.getElementById("showWechatUrl");k.style.cssText=h;var m="canvas";if(navigatorLowerIe8()){m="table"
}jQuery("#showWechatUrl").html("").qrcode({render:m,width:198,height:198,text:i})}$("#wechat_shaoma_div_exception").hide();$("#wechat_shaoma_div").show();var j=document.getElementById("showWechatUrl");if(j){payForwechat=setInterval(checkIsPayForWechat,5000)}}else{if(l.wechatSign==0&&f&&e==""&&f==c){$("#wechat_shaoma_div").hide();$("#wechat_shaoma_div_exception").show()}else{$("#wechat_shaoma_div").hide();$("#wechat_shaoma_div_exception").hide()}}if((l.alipaySign==1&&f&&e==""&&f==g)||(f&&e==""&&f==c)){$("#pay_normal_div").hide()}else{$("#pay_normal_div").show()}paymentGatewaySaved=true}else{$(".mod_pay_result .all_banks_box").slideUp();$(".mod_pay_result #pay_bank_box").slideDown(0);jQuery("#err_popwin").html("订单暂时无法编辑，请稍后再试！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"})}}}})
}function initCreditCardDisabled(){if($(".pay_other").attr("isCreditCardEbank")==0&&$(".pay_other").attr("isCreditCardDirectPay")==0){var a=$("#card_u");a.removeAttr("checked","checked");a.find(".testWensong").addClass("canNoUse");a.prop("disabled","disabled");$("#creditCardDisabledId").show()}}function choosePayMethod(t){var b=$("input:radio[name='pay_bank7']:checked");var f=$("input:radio[name='pay_bank3']:checked");var g=b.attr("signNo");var r=b.attr("gatewayName");var k=$(".pay_other").attr("isCreditCardEbank");var c=$(".pay_other").attr("isDebitCardDirectPay");var l=$(".pay_other").attr("isDebitCardEbank");var q=$(".pay_other").attr("isCreditCardDirectPay");var w=$("#popChangeCard2").attr("bankCode").toUpperCase();var p=$("#popChangeCard2").attr("bankCode");var j=$("#popChangeCard2").attr("orderId");
var h=$("#popChangeCard2").attr("orderCode");var i=$("#popChangeCard2").attr("gatewayId");var n=$("#popChangeCard2").attr("preType");var m=b.attr("id");var u=b.val();var v=f.attr("id");var d=f.val();if(typeof(g)=="undefined"||g==""){var a=b.attr("bindPay");if(typeof(a)!="undefined"){var o;$(".payWensong").each(function(){if(a.indexOf($(this).val())<0){$(this).removeAttr("checked","checked");$(this).find(".testWensong").addClass("canNoUse");$(this).prop("disabled","disabled");o=$(this).attr("id");if($(this).attr("value")=="FAST_PAY"){$("#notSupportMess").html("该卡类型暂不支持快捷支付");$("#notSupportMess").css("display","block");$("#card_amout_limit").css("display","none")}$("#moreThanLimit").css("display","none");$("#moreThanLimit").html("")}else{var x=$("#orderAmount").val();if($(this).attr("value")=="FAST_PAY"&&isMoreThanLimitForQuickPay()){$(this).removeAttr("checked","checked");
$(this).find(".testWensong").addClass("canNoUse");$(this).prop("disabled","disabled");o=$(this).attr("id");$("#notSupportMess").html("");$("#notSupportMess").css("display","none");$("#card_amout_limit").css("display","block");$("#moreThanLimit").css("display","block");$("#moreThanLimit").html("应付金额超过限额，暂不可用")}else{$("#moreThanLimit").css("display","none");$(this).removeAttr("disabled");$(this).removeAttr("title");$(".testWensong").removeClass("canNoUse");$(".sloganA").hide();if($(this).attr("value")=="FAST_PAY"){$("#card_amout_limit").css("display","block")}payResult.prizeBrought()}}});if(typeof(o)!="undefined"){$(".pay_kind").find("label").each(function(){if(o==$(this).attr("for")){$(this).find(".testWensong").addClass("canNoUse");$(this).find(".sloganA").show()}else{$(this).find(".sloganA").hide();
if($("#notSupportMess").css("display")=="none"){}payResult.prizeBrought()}})}}var e=f.attr("bindCard");if(typeof(e)!="undefined"){var s;$(".cardWensong").each(function(){if(e.indexOf($(this).val())<0){$(this).removeAttr("checked","checked");$(this).find(".testWensong").addClass("canNoUse");$(this).prop("disabled","disabled");s=$(this).attr("id")}else{$(this).removeAttr("disabled");$(this).removeAttr("title");if($("#notSupportMess").css("display")=="none"){$("#card_amout_limit").attr("style","display: block")}payResult.prizeBrought()}});if(typeof(s)!="undefined"){$(".kind_card").find("label").each(function(){if(s==$(this).attr("for")){$(this).find(".testWensong").addClass("canNoUse");$(this).attr("title","该卡类型暂不支持快捷支付");$(this).find(".sloganA").show()}else{$(this).find(".sloganA").hide();$("#card_amout_limit").attr("style","display: block");
payResult.prizeBrought()}})}}if(typeof(t)!="undefined"&&t=="go"){if(typeof(m)=="undefined"||typeof(v)=="undefined"){if(typeof(b)=="undefined"){alert("请选择支付卡信息");return}else{alert("请选择支付方式信息");return}}if(d=="FAST_PAY"){$(".mod_popup_pay").show();if($("#popChageCard2")){$("#popfastPay").remove()}window.open("/gateway/selectFastPay.do?bankCardType="+u+"&selectBankCode="+w+"&orderCode="+h+"&generalSignType=2")}else{$(".mod_popup_pay").show();$("#mask").show();if($("#popChageCard2")){$("#popfastPay").remove()}window.open("/gateway/select_gateway.do?orderId="+j+"&preType="+n+"&gatewayCode="+p)}}}else{var m=b.attr("id");if(typeof(t)!="undefined"&&t=="go"){openFastPayUrl(g,j,h,w)}}}function initSelect(){var a=$("input:radio[name='pay_bank7']:checked");var b=$("input:radio[name='pay_bank3']:checked");
var c=a.attr("bindPay");$(".sloganA").hide();if(typeof(c)!="undefined"){$(".payWensong").each(function(){if(c.indexOf($(this).val())<0){$(this).removeAttr("checked","checked");$(this).prop("disabled","disabled");var d=$(this).attr("id");$("label").each(function(){if($(this).attr("for")==d){$(this).find(".sloganA").show();$(this).find(".testWensong").addClass("canNoUse")}else{$(this).find(".sloganA").hide();$(this).find(".testWensong").removeClass("canNoUse");if($("#notSupportMess").css("display")=="none"){$("#card_amout_limit").attr("style","display: block")}payResult.prizeBrought()}})}else{$(this).removeAttr("disabled");$(this).removeAttr("title");$(this).prop("checked",true);if((!($(this).prop("disabled")))&&($(this).attr("id")=="pay_e")){if($("#notSupportMess").css("display")=="none"){$("#card_amout_limit").attr("style","display: block")
}payResult.prizeBrought()}}})}$(".payWensong").each(function(){if(($(this).prop("disabled"))&&($(this).attr("id")=="pay_e")){$("#card_amout_limit").attr("style","display: none");var d=$("#orderAmount").val();if($("#notSupportMess").css("display")=="none"&&isMoreThanLimitForQuickPay()){$("#moreThanLimit").css("display","block")}else{$("#moreThanLimit").css("display","none")}}})}function doPayV2(d,j,f){gotracker("2","buttonPosition","",loli.spm.getData($("#pcOrderFinishGoPay")));var l=$("input:radio[name='pay_bank1']:checked");var h=l.attr("id");if(typeof(h)=="undefined"){jQuery("#err_popwin").html("选择支付方式！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return}var k=$("#"+h).attr("confirmGatewayCode");var b=$("#bank_logo").attr("confirmGatewayCode");if(k!=b){var e=$("#"+h).attr("confirmPaySignId");
var c=$("#"+h).attr("confirmGatewayCode").toUpperCase();var a=$("#"+h).attr("signNo");var i=$("#"+h).attr("bankType");b=k}else{var e=$("#bank_logo").attr("confirmPaySignId");var c=$("#bank_logo").attr("confirmGatewayCode").toUpperCase();var a=$("#bank_logo").attr("signNo");var i=$("#bank_logo").attr("bankType")}if(b==""){jQuery("#err_popwin").html("订单信息错误，请稍后再试！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return}if(e!=""&&e>0){openFastPayUrl(a,d,f,c)}else{if(i==1){if(b=="fund"||b=="pingancard"){$(".mod_popup_pay").show();$("#mask").show();window.open("https://my.yhd.com/order/select_fundPayMethod.do?orderCode="+f+"&orderId="+d+"&gatewayCode="+b)}else{$(".mod_popup_pay").show();$("#mask").show();window.open("/gateway/select_gateway.do?orderId="+d+"&preType="+j+"&gatewayCode="+b)
}}else{var g="/order/popWinFastPay.do?orderCode="+f+"&orderId="+d+"&paySignId="+e+"&selectBankCode="+b;if($("#popChageCard2")){$("#popfastPay").remove()}jQuery.ajax({type:"post",url:g,success:function(m){$("body").append(m);payResult.showPopup($("#popChangeCard2"));payResult.closePopup($(".mod_change_card .tit_bar button"),".mod_change_card");payResult.closePopup($(".mod_change_card .btn_return"),".mod_change_card");$("#mask").show();initSelect();$("#popChangeCard2").find(".btn_box .btn_smt").unbind("click").bind("click",function(){choosePayMethod("go")});payResult.prizeBrought();if(isMoreThanLimitForQuickPay()){$("#popfastPay .mod_change_card .clearfix .tips").css("display","block");$("#quick_pay li").each(function(){disableQuickPayMent($(this))})}initCreditCardDisabled()}})}}}function confirmFastPay(){gotracker("2","buttonPosition","",loli.spm.getData($("#pcFastPayOrder")));
var d=$("#verifyCode").val();var a=$("#finish_order_code").val();var c=$("#paySignNo").val();var b=$("#bankCode").val();var e="/order/produceSign.do?orderCode="+a+"&paySignNo="+c+"&bankCode="+b+"&verifyCode="+d+"&generalSignType=1";jQuery.getJSON(e,function(g){if(g&&g.code==1){var f=g.fastPayUrl;window.location=f}else{jQuery("#err_popwin").html(g.errorMsg);yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return}})}function sendMsgFastPay(){deadLineFastPay=60;var a=$("#orderCode").val();var c=$("#paySignNo").val();var e="/order/produceSign.do?orderCode="+a+"&paySignNo="+c+"&generalSignType=0";var b=$("#isVoiceValidateOn").val();var d=$("#isVoiceSwitchOn").val();if(b=="true"&&d=="true"){e=e+"&voiceValidate=true";$("#validateTips").html("")}else{e=e+"&voiceValidate=false";if(d=="true"){$("#validateTips").html("若没有收到短信，稍后您可尝试语音验证")
}}jQuery.getJSON(e,function(f){if(f&&f.code==1){gotracker("2","buttonPosition","",loli.spm.getData($("#timeToDeadLineFastPay")));timeToDeadLineFastPay();jQuery("#timeToDeadLineFastPay").unbind("click",sendMsgFastPay);if(f.voiceNumber!=null){jQuery("#validateTips").html("<span>"+f.voiceNumber+"</span>即将为您播报验证码，请耐心等待")}}else{$("#validateTips").html("");jQuery("#err_popwin").html(f.errorMsg);yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return}})}var deadLineFastPay=60;function timeToDeadLineFastPay(){if(jQuery(".get_code").length>=1){if(deadLineFastPay!=0){jQuery("#timeToDeadLineFastPay").prop("disabled",true);jQuery("#timeToDeadLineFastPay").html("<span>"+deadLineFastPay+"</span>秒后重新获取");deadLineFastPay--;setTimeout("timeToDeadLineFastPay()",1000)}else{jQuery("#timeToDeadLineFastPay").prop("disabled",false);
var a=$("#isVoiceSwitchOn").val();if(a=="true"){jQuery("#timeToDeadLineFastPay").html("获取语音验证码");jQuery("#isVoiceValidateOn").attr("value","true")}else{jQuery("#timeToDeadLineFastPay").html("获取短信验证码");jQuery("#isVoiceValidateOn").attr("value","false")}jQuery("#timeToDeadLineFastPay").bind("click",sendMsgFastPay);jQuery("#validateTips").html("")}}}function openFastPayUrl(d,a,b,c){if(d!=null&&a!=null&&b!=null){if($("#popChageCard2")){$("#popfastPay").remove()}$("#mask").show();$(".mod_popup_pay").show();window.open("/order/select_fastPayMethod.do?orderCode="+b+"&orderId="+a+"&signNo="+d+"&bankCode="+c)}else{jQuery("#err_popwin").html("订单信息错误，请稍后再试！");yhdLib.popwin({poptitle:"温馨提示",popcontent:".error_info_show"});return}}function choosePayNextForFinishOrder(a){jQuery("#pay_wait_winClose").click();
choosePayForFinishOrder(a)}function displayMask(){var a=document.body.clientWidth;var b=document.body.clientHeight;jQuery("<div id='maskDiv'/>").width(a).height(b+document.body.scrollHeight/8).css("background","#333").css("position","absolute").css("top","0px").css("left","0px").css("opacity","0.5").css("filter","Alpha(Opacity=50)").css("z-index",390000).appendTo("body").fadeIn(200)}function popClose(a){jQuery(".popGeneral_address").hide();jQuery(".popGeneral_address .aptab_center_address").empty();jQuery("#maskDiv").remove()}function addBookmark(b,a){if(window.sidebar){window.sidebar.addPanel(b,a,"")}else{if(document.all){window.external.AddFavorite(a,b)}else{if(window.opera&&window.print){return true}}}}function bindEmail(){var a="/order/popFinishOrderEmail.do";jQuery.ajax({type:"post",url:a,success:function(e){if(e.indexOf("notLogin")>=0){yhdLogin();
return false}if(e){yhdLib.popwin({poptitle:"输入邮箱",popcontentstr:e});var d=$(".mod_check_email .email_input");var b=$(".mod_check_email .tips_erro");var c=/^\w[\w\$\^\(\)\[\]\{\}\.\-\+,]{0,100}@([a-zA-Z0-9][\w\-]*\.)+[a-zA-Z]{2,6}$/;$(".btn_smt").click(function(){if($.trim(d.val())==""){d.addClass("input_erro");b.show();b.text("请输入邮箱地址");return false}else{if(!c.test(d.val())){d.addClass("input_erro");b.show();b.text("您输入的邮箱格式不正确");return false}else{var f="/order/saveFinishOrderEmail.do?callback=?";var g="userEmail="+d.val();jQuery.getJSON(f,g,function(h){if(h&&h.code){if(h.code==-1){yhdLogin();return false}else{if(h.code==0){$(".mod_check_email").html("<p>系统繁忙，请稍后再试。</p>");setTimeout(function(){window.location.reload()},3000)}else{if(h.code==1){$(".mod_check_email").html("<p class='succ_tips'>您的订单详情将以邮件的形式发送给您。</p>");
setTimeout(function(){window.location.reload()},3000)}else{if(h.code==2){d.addClass("input_erro");b.show();b.text("请输入邮箱地址")}else{if(h.code==3){d.addClass("input_erro");b.show();b.text("您输入的邮箱格式不正确")}else{if(h.code==4){d.addClass("input_erro");b.show();b.text("您输入的邮箱已经存在，请换个邮箱")}else{$(".mod_check_email").html("<p>系统繁忙，请稍后再试。</p>");setTimeout(function(){window.location.reload()},3000)}}}}}}}})}}return false});d.focus(function(){d.removeClass("input_erro");b.hide()});$(".popwinClose").click(function(){yhdLib.popclose()})}}})}function getDimension(){var b=document.getElementById("showAppCouponUrl");if(b){var d=$("#appCouponUrl").val();var c=document.getElementById("showAppCouponUrl");var a="width:114pxheight:114px;";c.style.cssText=a;if(d!=""){jQuery("#showAppCouponUrl").html("").qrcode({render:"table",width:114,height:114,text:d})
}else{jQuery("#showAppCouponUrl").html("")}}}jQuery(document).ready(function(){if(isMoreThanLimitForQuickPay()){$(".all_banks_box .tit_bar2 .tips").css("display","block");$(".pay_wrap li").each(function(){disableQuickPayMent($(this))});$("#chooseG_alipay").prop("checked",true)}});function isMoreThanLimitForQuickPay(){var a=$("#payableAmount").val();var b=5000;if(a&&parseFloat(a)>b){return true}return false}function disableQuickPayMent(a){a.find("input[type='radio']").prop("checked",false);a.removeClass("current");a.addClass("not_support");a.find("label").after("<div class='not_support_cover'></div>")};function chooseAddrCopyToOrder(h){jQuery("#editOrderAddr_pop_ReceiverName").val(jQuery("#editAddress_popwin_receiverName_"+h).html());jQuery("#editOrderAddr_pop_Address").val(jQuery("#editAddress_popwin_address_"+h).html());jQuery("#editOrderAddr_pop_mobile").val("");jQuery("#editOrderAddr_pop_phone").val(jQuery("#editAddress_popwin_phone_"+h).val());tagId="#editAddress_popwin_mobil_"+h;var e=jQuery("#editAddress_popwin_countyName_"+h).val();var f=jQuery("#editOrderAddr_pop_countyId option").length;for(var g=0;g<f;g++){if(jQuery("#editOrderAddr_pop_countyId").get(0).options[g].text==e){jQuery("#editOrderAddr_pop_countyId").get(0).options[g].selected=true;break}}chooseNew()}var mobilStr="";var isNeedUpdate=false;function chooseAddress(){jQuery("#chooseAddress").addClass("current");jQuery("#chooseAddressDiv").show();
jQuery("#chooseNew").removeClass("current");jQuery("#chooseNewDiv").hide()}function chooseNew(){jQuery("#editOrderAddr_pop_mobile").val("");jQuery("#chooseNew").addClass("current");jQuery("#chooseNewDiv").show();jQuery("#chooseAddress").removeClass("current");jQuery("#chooseAddressDiv").hide()}function chooseExistAddress(b){jQuery(".already_address_div").removeClass("select_li");jQuery(b).addClass("select_li")}function cancelSaveAddressAndUnlockOrder(d){var e=getOrderVersionPara(d);var f="/order/unLockOrder.do";jQuery.ajax({type:"post",url:f,data:e,complete:function(a){}})}function getOrderVersionPara(h){var e="orderId="+h+"&versionNo="+jQuery("#editAddress_popwin_versionNo").val();var f=jQuery("input[id^=editAddress_popwin_subVersionNo_]");if(f&&f.length>0){var g=jQuery("input[id^=editAddress_popwin_subVersionNo_]").map(function(){return"subVersionNos="+jQuery(this).val()
}).get().join("&");e=e+"&"+g}return e}function saveOrderAddressUseBook(j){gotracker("2","","",loli.spm.getData($(".btn_save"),"button"));var i=jQuery(".select_li").attr("addId");var k=jQuery("#editOrderAddr_pop_address34Editable").val();var l=0;if(k=="true"){l=1}var g=getOrderVersionPara(j);g+="&addressBookId="+i+"&isEdit34AddreBook="+l;var h="/order/editOrderSaveAddrUserAddrBook.do";jQuery.ajax({type:"post",url:h,data:g,success:function(a){if(a.indexOf("notLogin")>=0){yhdLogin();return false}if(a==1){var b=jQuery("#editAddress_popwin_succseTest").val();jQuery("#editAddress_popwin_ResultText").html(b)}else{if(a==2){unlockOrderAddress(j,g);jQuery("#editAddress_popwin_ResultText").html("运费不同,暂无法修改，您可联系客服热线或尝试取消订单重下，谢谢支持！")}else{if(a==3){unlockOrderAddress(j,g);jQuery("#editAddress_popwin_ResultText").html("不支持当前的配送服务，暂无法修改，您可联系客服热线或尝试取消订单重下，谢谢支持！")
}else{if(a==4){unlockOrderAddress(j,g);jQuery("#editAddress_popwin_ResultText").html("不支持当前的支付服务，暂无法修改，您可联系客服热线或尝试取消订单重下，谢谢支持！")}else{unlockOrderAddress(j,g);jQuery("#editAddress_popwin_ResultText").html("系统异常，请重试！")}}}}jQuery(".popGeneral_address").hide();yhdLib.popwin({popcontentstr:jQuery("#editAddress_popwin_succseDiv").html()});setTimeout(function(){window.location.reload()},3000)}})}function saveOrderAddressUseNew(D){clearAddressDes();var A=jQuery("#editOrderAddr_pop_address34Editable").val();var t=jQuery("#editOrderAddr_pop_orderPaySign").val();var C=jQuery("#editOrderAddr_pop_countyId").val();var s=jQuery("#editOrderAddr_pop_countyId").find("option:selected").text();var v=jQuery("#editOrderAddr_pop_provinceName").val();var u=jQuery("#editOrderAddr_pop_cityName").val();if(A=="true"){if(!C||C==-1||!v||!u||!s){jQuery("#editOrderAddr_pop_postCodeNull").show();
return}}var q=jQuery("#editOrderAddr_pop_Address").val();var y=jQuery("#editOrderAddr_pop_ReceiverName").val();var E;E=jQuery("#editOrderAddr_pop_mobile").val();var w=jQuery("#editOrderAddr_pop_phone").val();var F="";var B=jQuery.trim(v)+jQuery.trim(u)+jQuery.trim(s);if(!validateAddressPara(y,q,E,w,B,t)){return}F="addressVo.receiverName="+encodeURIComponent(y);F+="&addressVo.address="+encodeURIComponent(q);F+="&addressVo.phone="+$.trim(w);F+="&addressVo.mobil="+$.trim(E);F+="&orderPaySign="+t;F+="&orderId="+D;if(A=="true"){F=F+"&addressVo.countyId="+C+"&addressVo.countyName="+encodeURIComponent(jQuery.trim(s))+"&addressVo.provinceName="+encodeURIComponent(jQuery.trim(v))+"&addressVo.cityName="+encodeURIComponent(jQuery.trim(u))}F=F+"&versionNo="+jQuery("#editAddress_popwin_versionNo").val();
var x=jQuery("input[id^=editAddress_popwin_subVersionNo_]");if(x&&x.length>0){var z=jQuery("input[id^=editAddress_popwin_subVersionNo_]").map(function(){return"subVersionNos="+jQuery(this).val()}).get().join("&");F=F+"&"+z}var r="/order/editOrderSaveAddrUserNew.do";jQuery.ajax({type:"post",url:r,data:F,success:function(a){if(a.indexOf("notLogin")>=0){yhdLogin();return false}if(a==1){var b=jQuery("#editAddress_popwin_succseTest").val();jQuery("#editAddress_popwin_ResultText").html(b)}else{if(a==2){unlockOrderAddress(D,F);jQuery("#editAddress_popwin_ResultText").html("新地址产生不同的运费，无法做修改，可以尝试取消订单重新购买，谢谢支持！")}else{if(a==3){unlockOrderAddress(D,F);jQuery("#editAddress_popwin_ResultText").html("新地址不支持当前配送服务，无法修改，可以尝试取消订单重新购买，谢谢支持！")}else{if(a==4){unlockOrderAddress(D,F);jQuery("#editAddress_popwin_ResultText").html("新地址不支持当前支付服务，无法修改，可以尝试取消订单重新购买，谢谢支持！")
}else{unlockOrderAddress(D,F);jQuery("#editAddress_popwin_ResultText").html("系统异常，请重试！")}}}}jQuery(".popGeneral_address").hide();yhdLib.popwin({popcontentstr:jQuery("#editAddress_popwin_succseDiv").html()});setTimeout(function(){window.location.reload()},3000)}})}function validateAddressPara(l,j,q,k,n,r){if(r!=1){var p=jQuery.trim(l).length;if(p==0||p>20){jQuery("#editOrderAddr_pop_receiverNameNull").show();jQuery("#editOrderAddr_pop_ReceiverName").focus();return false}if(filterScripts(l)!=l||!checkTextValid(l)){jQuery("#editOrderAddr_pop_receiverNameError").show();return false}if(q==""&&k==""){jQuery("#editOrderAddr_pop_mobilePhoneNull").show();jQuery("#editOrderAddr_pop_mobile").focus();return false}else{if((!/^\d{11}$/.test(jQuery("#editOrderAddr_pop_mobile").val()))&&(jQuery("#editOrderAddr_pop_mobile").val()!=mobilStr)){jQuery("#editOrderAddr_pop_mobileError").show();
return}if(q!=""){q=jQuery.trim(q);var o=/^1\d{10}$/g;if(!q.match(o)){jQuery("#editOrderAddr_pop_mobileError").show();jQuery("#editOrderAddr_pop_mobile").focus();return false}}if(k!=""){k=jQuery.trim(k);var o=/^[0](\d{2,3})-(\d{7,8})(-(\d{1,6}))*$/;if(!k.match(o)){jQuery("#editOrderAddr_pop_phoneError").show();jQuery("#editOrderAddr_pop_phone").focus();return false}}}}var m=(jQuery.trim(j)+n).length;if(j.length==0||m>68){jQuery("#editOrderAddr_pop_addressNull").show();jQuery("#editOrderAddr_pop_Address").focus();return false}if(filterScripts(j)!=j||!checkTextValid(j)){jQuery("#editOrderAddr_pop_addressError").show();return false}return true}function clearAddressDes(){jQuery("#editOrderAddr_pop_receiverNameNull").hide();jQuery("#editOrderAddr_pop_receiverNameError").hide();jQuery("#editOrderAddr_pop_addressNull").hide();
jQuery("#editOrderAddr_pop_addressError").hide();jQuery("#editOrderAddr_pop_mobileError").hide();jQuery("#editOrderAddr_pop_phoneError").hide();jQuery("#editOrderAddr_pop_mobilePhoneNull").hide();jQuery("#editOrderAddr_pop_postCodeNull").hide()}function filterScripts(d){var c="";c=decodeURIComponent(d);c=c.replace(/<script(.|\n)*\/script>\s*/ig,"").replace(/<javascript(.|\n)*\/javascript>\s*/ig,"").replace(/<[^>]+/ig,function(a){return a.replace(/\s*on\w+=[^ ]+/ig,"")});return c}function checkTextValid(f){if(f==null||f.length==0){return false}var g=/[\"\'-,.()-,.，。（）\\]/gi;var e=f.replace(g,"");e=e.replace(/\s/g,"");var h=/[\"\'<>,.\/:&*^%$#@!?\\]/;if(e==null||e.length==0){return false}else{if(h.exec(f)){return false}else{return true}}}function popWinEditOrderDiv(b){jQuery.ajax({type:"post",url:"/order/popShowEditAddressPage.do",data:"orderId="+b,success:function(a){if(a.indexOf("notLogin")>=0){yhdLogin();
return false}if(a<0){YHD.alert("抱歉，您的订单不能编辑。");window.location.reload()}else{YHD.popwin(a)}}})}function openToBindMobile(){gotracker("2","","",loli.spm.getData($(".btn_sure"),"button"));window.open("/member/bind/bind.do");jQuery(".close_tcg").click()}function alreadyPayOrderEditAddreValidate(d){var c=$("#isHaveVerify_"+d).val();if(c==0){jQuery.ajax({type:"post",url:"/order/popShowOrderEditAddreValidate.do",data:"orderId="+d,success:function(a){if(a.indexOf("notLogin")>=0){yhdLogin();return false}if(a<0){YHD.alert("抱歉，您的订单不能编辑。");window.location.reload()}else{yhdLib.popwin({popcontentstr:a})}}})}else{popWinEditOrderDiv(d)}}var deadLine=60;function timeToDeadLine(){if(jQuery(".reg_btn_box").length>=1){if(deadLine!=0){jQuery(".reg_btn_box").html("<button class='reg_tel_btn1' disabled='disabled'><span>"+deadLine+"</span>秒后重新获取</button>");
deadLine--;setTimeout("timeToDeadLine()",1000)}else{jQuery(".reg_btn_box").html("<button class='reg_tel_btn2' onclick='sendEditOrderAddrValidateCode();'>重新发送验证码</button>")}}}function clearSendCodeDesc(){jQuery("#tipsText").html("为了保证订单安全，请您在修改地址之前完成手机验证");jQuery("#tipsTextClass").addClass("tips1");jQuery("#tipsTextClass").removeClass("tips2")}function sendEditOrderAddrValidateCode(){gotracker("2","","",loli.spm.getData($(".reg_tel_btn2"),"button"));clearSendCodeDesc();var b="/order/sendEditOrderAddrValidateCode.do?callback=?";jQuery.getJSON(b,function(a){if(a&&a.errorNum){if(a.errorNum==1){jQuery("#tipsText").html("验证码已经发送成功！");deadLine=60;timeToDeadLine()}else{if(a.errorNum==2){jQuery("#tipsText").html("您今天尝试的次数过多，请明天再来！");jQuery("#tipsTextClass").addClass("tips2");jQuery("#tipsTextClass").removeClass("tips1")
}else{if(a.errorNum==3){jQuery("#tipsText").text("两次发送短信的间隔不能小于1分钟！");jQuery("#tipsTextClass").addClass("tips2");jQuery("#tipsTextClass").removeClass("tips1")}else{if(a.errorNum==4){jQuery("#tipsText").html("系统繁忙，请稍后再试！");jQuery("#tipsTextClass").addClass("tips2");jQuery("#tipsTextClass").removeClass("tips1")}}}}}})}function verificationEditOrderAddrCode(){gotracker("2","","",loli.spm.getData($(".btn_sure"),"button"));clearSendCodeDesc();var c=$(".reg_num").val();if(!c||c==""){jQuery("#tipsText").html("验证码不能为空");jQuery("#tipsTextClass").addClass("tips2");jQuery("#tipsTextClass").removeClass("tips1");return}else{if(c.length!=6||!isNumber(c)){jQuery("#tipsText").html("您输入的验证码有误，验证码是6位数字");jQuery("#tipsTextClass").addClass("tips2");jQuery("#tipsTextClass").removeClass("tips1");return}else{var d="/order/validateCodeForEditOrderAddr.do?validateCode="+c+"&callback=?";
jQuery.getJSON(d,function(a){if(a&&a.errorNum){if(a.errorNum==1){var b=jQuery("#pop_editOrderAddr_mobileVif_orderid").val();$("#isHaveVerify_"+b).val(1);jQuery(".close_tcg").click();popWinEditOrderDiv(b)}else{jQuery("#tipsText").html("验证码不正确");jQuery("#tipsTextClass").addClass("tips2");jQuery("#tipsTextClass").removeClass("tips1")}}})}}}function isNumber(c){var d=/^[0-9]+(.[0-9]{1,2})?$/;if(!d.exec(c)){return false}return true}function unlockOrderAddress(d,e){var f="/order/unLockOrder.do";jQuery.ajax({type:"post",url:f,data:e,complete:function(a){window.location.reload()}})};function yhdLogin(){yhdPublicLogin.showLoginDivNone(URLPrefix.passport,false,false,function(){location.reload()})};(function(b){b.fn.qrcode=function(l){var a;function j(c){this.mode=a;this.data=c}function q(d,c){this.typeNumber=d;this.errorCorrectLevel=c;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}function t(e,c){if(void 0==e.length){throw Error(e.length+"/"+c)}for(var d=0;d<e.length&&0==e[d];){d++}this.num=Array(e.length-d+c);for(var f=0;f<e.length-d;f++){this.num[f]=e[f+d]}}function s(d,c){this.totalCount=d;this.dataCount=c}function h(){this.buffer=[];this.length=0}j.prototype={getLength:function(){return this.data.length},write:function(d){for(var c=0;c<this.data.length;c++){d.put(this.data.charCodeAt(c),8)}}};q.prototype={addData:function(c){this.dataList.push(new j(c));this.dataCache=null},isDark:function(d,c){if(0>d||this.moduleCount<=d||0>c||this.moduleCount<=c){throw Error(d+","+c)
}return this.modules[d][c]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var e=1,e=1;40>e;e++){for(var g=s.getRSBlocks(e,this.errorCorrectLevel),c=new h,f=0,d=0;d<g.length;d++){f+=g[d].dataCount}for(d=0;d<this.dataList.length;d++){g=this.dataList[d],c.put(g.mode,4),c.put(g.getLength(),m.getLengthInBits(g.mode,e)),g.write(c)}if(c.getLengthInBits()<=8*f){break}}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,c){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=Array(this.moduleCount);for(var f=0;f<this.moduleCount;f++){this.modules[d][f]=null}}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);
this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(e,c);7<=this.typeNumber&&this.setupTypeNumber(e);null==this.dataCache&&(this.dataCache=q.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,c)},setupPositionProbePattern:function(e,c){for(var d=-1;7>=d;d++){if(!(-1>=e+d||this.moduleCount<=e+d)){for(var f=-1;7>=f;f++){-1>=c+f||this.moduleCount<=c+f||(this.modules[e+d][c+f]=0<=d&&6>=d&&(0==f||6==f)||0<=f&&6>=f&&(0==d||6==d)||2<=d&&4>=d&&2<=f&&4>=f?!0:!1)}}}},getBestMaskPattern:function(){for(var e=0,c=0,d=0;8>d;d++){this.makeImpl(!0,d);var f=m.getLostPoint(this);if(0==d||e>f){e=f,c=d}}return c},createMovieClip:function(e,g,c){e=e.createEmptyMovieClip(g,c);this.make();for(g=0;g<this.modules.length;g++){for(var c=1*g,f=0;f<this.modules[g].length;
f++){var d=1*f;this.modules[g][f]&&(e.beginFill(0,100),e.moveTo(d,c),e.lineTo(d+1,c),e.lineTo(d+1,c+1),e.lineTo(d,c+1),e.endFill())}}return e},setupTimingPattern:function(){for(var c=8;c<this.moduleCount-8;c++){null==this.modules[c][6]&&(this.modules[c][6]=0==c%2)}for(c=8;c<this.moduleCount-8;c++){null==this.modules[6][c]&&(this.modules[6][c]=0==c%2)}},setupPositionAdjustPattern:function(){for(var e=m.getPatternPosition(this.typeNumber),g=0;g<e.length;g++){for(var i=0;i<e.length;i++){var f=e[g],k=e[i];if(null==this.modules[f][k]){for(var c=-2;2>=c;c++){for(var d=-2;2>=d;d++){this.modules[f+c][k+d]=-2==c||2==c||-2==d||2==d||0==c&&0==d?!0:!1}}}}}},setupTypeNumber:function(e){for(var c=m.getBCHTypeNumber(this.typeNumber),d=0;18>d;d++){var f=!e&&1==(c>>d&1);this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=f
}for(d=0;18>d;d++){f=!e&&1==(c>>d&1),this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=f}},setupTypeInfo:function(e,g){for(var c=m.getBCHTypeInfo(this.errorCorrectLevel<<3|g),f=0;15>f;f++){var d=!e&&1==(c>>f&1);6>f?this.modules[f][8]=d:8>f?this.modules[f+1][8]=d:this.modules[this.moduleCount-15+f][8]=d}for(f=0;15>f;f++){d=!e&&1==(c>>f&1),8>f?this.modules[8][this.moduleCount-f-1]=d:9>f?this.modules[8][15-f-1+1]=d:this.modules[8][15-f-1]=d}this.modules[this.moduleCount-8][8]=!e},mapData:function(n,c){for(var d=-1,r=this.moduleCount-1,e=7,f=0,i=this.moduleCount-1;0<i;i-=2){for(6==i&&i--;;){for(var g=0;2>g;g++){if(null==this.modules[r][i-g]){var k=!1;f<n.length&&(k=1==(n[f]>>>e&1));m.getMask(c,r,i-g)&&(k=!k);this.modules[r][i-g]=k;e--;-1==e&&(f++,e=7)}}r+=d;if(0>r||this.moduleCount<=r){r-=d;
d=-d;break}}}}};q.PAD0=236;q.PAD1=17;q.createData=function(e,g,i){for(var g=s.getRSBlocks(e,g),f=new h,c=0;c<i.length;c++){var d=i[c];f.put(d.mode,4);f.put(d.getLength(),m.getLengthInBits(d.mode,e));d.write(f)}for(c=e=0;c<g.length;c++){e+=g[c].dataCount}if(f.getLengthInBits()>8*e){throw Error("code length overflow. ("+f.getLengthInBits()+">"+8*e+")")}for(f.getLengthInBits()+4<=8*e&&f.put(0,4);0!=f.getLengthInBits()%8;){f.putBit(!1)}for(;!(f.getLengthInBits()>=8*e);){f.put(q.PAD0,8);if(f.getLengthInBits()>=8*e){break}f.put(q.PAD1,8)}return q.createBytes(f,g)};q.createBytes=function(k,r){for(var x=0,n=0,y=0,c=Array(r.length),f=Array(r.length),d=0;d<r.length;d++){var i=r[d].dataCount,e=r[d].totalCount-i,n=Math.max(n,i),y=Math.max(y,e);c[d]=Array(i);for(var g=0;g<c[d].length;g++){c[d][g]=255&k.buffer[g+x]
}x+=i;g=m.getErrorCorrectPolynomial(e);i=(new t(c[d],g.getLength()-1)).mod(g);f[d]=Array(g.getLength()-1);for(g=0;g<f[d].length;g++){e=g+i.getLength()-f[d].length,f[d][g]=0<=e?i.get(e):0}}for(g=d=0;g<r.length;g++){d+=r[g].totalCount}x=Array(d);for(g=i=0;g<n;g++){for(d=0;d<r.length;d++){g<c[d].length&&(x[i++]=c[d][g])}}for(g=0;g<y;g++){for(d=0;d<r.length;d++){g<f[d].length&&(x[i++]=f[d][g])}}return x};a=4;for(var m={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(d){for(var c=d<<10;
0<=m.getBCHDigit(c)-m.getBCHDigit(m.G15);){c^=m.G15<<m.getBCHDigit(c)-m.getBCHDigit(m.G15)}return(d<<10|c)^m.G15_MASK},getBCHTypeNumber:function(d){for(var c=d<<12;0<=m.getBCHDigit(c)-m.getBCHDigit(m.G18);){c^=m.G18<<m.getBCHDigit(c)-m.getBCHDigit(m.G18)}return d<<12|c},getBCHDigit:function(d){for(var c=0;0!=d;){c++,d>>>=1}return c},getPatternPosition:function(c){return m.PATTERN_POSITION_TABLE[c-1]},getMask:function(e,c,d){switch(e){case 0:return 0==(c+d)%2;case 1:return 0==c%2;case 2:return 0==d%3;case 3:return 0==(c+d)%3;case 4:return 0==(Math.floor(c/2)+Math.floor(d/3))%2;case 5:return 0==c*d%2+c*d%3;case 6:return 0==(c*d%2+c*d%3)%2;case 7:return 0==(c*d%3+(c+d)%2)%2;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var c=new t([1],0),d=0;d<e;d++){c=c.multiply(new t([1,o.gexp(d)],0))
}return c},getLengthInBits:function(d,c){if(1<=c&&10>c){switch(d){case 1:return 10;case 2:return 9;case a:return 8;case 8:return 8;default:throw Error("mode:"+d)}}else{if(27>c){switch(d){case 1:return 12;case 2:return 11;case a:return 16;case 8:return 10;default:throw Error("mode:"+d)}}else{if(41>c){switch(d){case 1:return 14;case 2:return 13;case a:return 16;case 8:return 12;default:throw Error("mode:"+d)}}else{throw Error("type:"+c)}}}},getLostPoint:function(k){for(var r=k.getModuleCount(),c=0,n=0;n<r;n++){for(var d=0;d<r;d++){for(var e=0,i=k.isDark(n,d),f=-1;1>=f;f++){if(!(0>n+f||r<=n+f)){for(var g=-1;1>=g;g++){0>d+g||r<=d+g||0==f&&0==g||i==k.isDark(n+f,d+g)&&e++}}}5<e&&(c+=3+e-5)}}for(n=0;n<r-1;n++){for(d=0;d<r-1;d++){if(e=0,k.isDark(n,d)&&e++,k.isDark(n+1,d)&&e++,k.isDark(n,d+1)&&e++,k.isDark(n+1,d+1)&&e++,0==e||4==e){c+=3
}}}for(n=0;n<r;n++){for(d=0;d<r-6;d++){k.isDark(n,d)&&!k.isDark(n,d+1)&&k.isDark(n,d+2)&&k.isDark(n,d+3)&&k.isDark(n,d+4)&&!k.isDark(n,d+5)&&k.isDark(n,d+6)&&(c+=40)}}for(d=0;d<r;d++){for(n=0;n<r-6;n++){k.isDark(n,d)&&!k.isDark(n+1,d)&&k.isDark(n+2,d)&&k.isDark(n+3,d)&&k.isDark(n+4,d)&&!k.isDark(n+5,d)&&k.isDark(n+6,d)&&(c+=40)}}for(d=e=0;d<r;d++){for(n=0;n<r;n++){k.isDark(n,d)&&e++}}k=Math.abs(100*e/r/r-50)/5;return c+10*k}},o={glog:function(c){if(1>c){throw Error("glog("+c+")")}return o.LOG_TABLE[c]},gexp:function(c){for(;0>c;){c+=255}for(;256<=c;){c-=255}return o.EXP_TABLE[c]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},p=0;8>p;p++){o.EXP_TABLE[p]=1<<p}for(p=8;256>p;p++){o.EXP_TABLE[p]=o.EXP_TABLE[p-4]^o.EXP_TABLE[p-5]^o.EXP_TABLE[p-6]^o.EXP_TABLE[p-8]}for(p=0;255>p;p++){o.LOG_TABLE[o.EXP_TABLE[p]]=p
}t.prototype={get:function(c){return this.num[c]},getLength:function(){return this.num.length},multiply:function(e){for(var c=Array(this.getLength()+e.getLength()-1),d=0;d<this.getLength();d++){for(var f=0;f<e.getLength();f++){c[d+f]^=o.gexp(o.glog(this.get(d))+o.glog(e.get(f)))}}return new t(c,0)},mod:function(e){if(0>this.getLength()-e.getLength()){return this}for(var c=o.glog(this.get(0))-o.glog(e.get(0)),d=Array(this.getLength()),f=0;f<this.getLength();f++){d[f]=this.get(f)}for(f=0;f<e.getLength();f++){d[f]^=o.gexp(o.glog(e.get(f))+c)}return(new t(d,0)).mod(e)}};s.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];
s.getRSBlocks=function(g,k){var n=s.getRsBlockTable(g,k);if(void 0==n){throw Error("bad rs block @ typeNumber:"+g+"/errorCorrectLevel:"+k)}for(var i=n.length/3,r=[],y=0;y<i;y++){for(var d=n[3*y+0],c=n[3*y+1],e=n[3*y+2],f=0;f<d;f++){r.push(new s(c,e))}}return r};s.getRsBlockTable=function(d,c){switch(c){case 1:return s.RS_BLOCK_TABLE[4*(d-1)+0];case 0:return s.RS_BLOCK_TABLE[4*(d-1)+1];case 3:return s.RS_BLOCK_TABLE[4*(d-1)+2];case 2:return s.RS_BLOCK_TABLE[4*(d-1)+3]}};h.prototype={get:function(c){return 1==(this.buffer[Math.floor(c/8)]>>>7-c%8&1)},put:function(e,c){for(var d=0;d<c;d++){this.putBit(1==(e>>>c-d-1&1))}},getLengthInBits:function(){return this.length},putBit:function(d){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0);d&&(this.buffer[c]|=128>>>this.length%8);
this.length++}};"string"===typeof l&&(l={text:l});l=b.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},l);return this.each(function(){var k;if("canvas"==l.render){k=new q(l.typeNumber,l.correctLevel);k.addData(l.text);k.make();var r=document.createElement("canvas");r.width=l.width;r.height=l.height;for(var c=r.getContext("2d"),n=l.width/k.getModuleCount(),d=l.height/k.getModuleCount(),e=0;e<k.getModuleCount();e++){for(var g=0;g<k.getModuleCount();g++){c.fillStyle=k.isDark(e,g)?l.foreground:l.background;var f=Math.ceil((g+1)*n)-Math.floor(g*n),i=Math.ceil((e+1)*n)-Math.floor(e*n);c.fillRect(Math.round(g*n),Math.round(e*d),f,i)}}}else{k=new q(l.typeNumber,l.correctLevel);k.addData(l.text);k.make();r=b("<table></table>").css("width",l.width+"px").css("height",l.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",l.background);
c=l.width/k.getModuleCount();n=l.height/k.getModuleCount();for(d=0;d<k.getModuleCount();d++){e=b("<tr></tr>").css("height",n+"px").appendTo(r);for(g=0;g<k.getModuleCount();g++){b("<td></td>").css("width",c+"px").css("background-color",k.isDark(d,g)?l.foreground:l.background).appendTo(e)}}}k=r;jQuery(k).appendTo(this)})}})(jQuery);