/* SVN.committedRevision=1554642 */
(function(c){var b=(function(){function d(f,e){return(e.y-f.y)/(e.x-f.x)}return function(e){var f=c(this),s=null,i=[],t=null,r=null,u=c.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:c.noop,exit:c.noop,activate:c.noop,deactivate:c.noop,exitMenu:c.noop},e);var l=3,h=300;var g=function(v){i.push({x:v.pageX,y:v.pageY});if(i.length>l){i.shift()}};var q=function(){if(r){clearTimeout(r)}if(u.exitMenu(this)){if(s){u.deactivate.call(s)}s=null}};var n=function(){if(r){clearTimeout(r)}u.enter(this);j(this)},m=function(){u.exit(this)};var o=function(){k(this)};var k=function(v){if(v==s){return}if(s){u.deactivate.call(s)}u.activate.call(v);s=v};var j=function(w){var v=p();if(v){r=setTimeout(function(){j(w)},v)}else{k(w)}};var p=function(){if(!s||!c(s).is(u.submenuSelector)){return 0
}var z=f.offset(),v={x:z.left,y:z.top-u.tolerance},F={x:z.left+f.outerWidth(),y:v.y},H={x:z.left,y:z.top+f.outerHeight()+u.tolerance},A={x:z.left+f.outerWidth(),y:H.y},B=i[i.length-1],E=i[0];if(!B){return 0}if(!E){E=B}if(E.x<z.left||E.x>A.x||E.y<z.top||E.y>A.y){return 0}if(t&&B.x==t.x&&B.y==t.y){return 0}var D=F,w=A;if(u.submenuDirection=="left"){D=H;w=v}else{if(u.submenuDirection=="below"){D=A;w=H}else{if(u.submenuDirection=="above"){D=v;w=F}}}var x=d(B,D),C=d(B,w),G=d(E,D),y=d(E,w);if(x<G&&C>y){t=B;return h}t=null;return 0};f.mouseleave(q).find(u.rowSelector).mouseenter(n).mouseleave(m).click(o);c(document).mousemove(g)}})();c.fn.yhdMenu=function(d){return this.each(function(){b.call(this,d)})};var a=c("#hg_allsort");a.yhdMenu({activate:function(d){c(this).addClass("cur")},deactivate:function(d){c(this).removeClass("cur")
},exitMenu:function(){return true}})})(jQuery);(function(){function a(b){this.option={container:null,content:null,trigger:null,pageButton:[],steps:1,effect:"visible",autoPlay:false,interval:3000,activeClass:"on",speed:300,eventType:"mouseover",delay:0};$.extend(this.option,b);this.box=$(this.option.container);if(this.box.length==0){return false}this.sprite=this.box.find(this.option.content);if(this.sprite.length==0){return false}this.trig=this.box.find(this.option.trigger).children();this.btnLast=this.box.find(this.option.pageButton[0]);this.btnNext=this.box.find(this.option.pageButton[1]);this.items=this.sprite.children();if(this.items.length==0){return false}this.total=this.items.length;if(this.total<=this.option.steps){return false}this.page=Math.ceil(this.total/this.option.steps);this.width=this.items.eq(0).outerWidth(true);this.height=this.items.eq(0).outerHeight(true);
this.index=0;this.timer=0;this.handlers={};this.init()}a.prototype={init:function(){this.initStyle();this.cutover(0);this.bindUI();this.autoPlay()},on:function(c,b){if(typeof this.handlers[c]=="undefined"){this.handlers[c]=[]}this.handlers[c].push(b);return this},fire:function(e,f){if(this.handlers[e] instanceof Array){var c=this.handlers[e];for(var d=0,b=c.length;d<b;d++){c[d](f)}}},initStyle:function(){var b=function(g){for(var f=0;f<g.option.steps;f++){g.items.eq(g.total-(f+1)).clone().prependTo(g.sprite);g.items.eq(f).clone().appendTo(g.sprite)}};switch(this.option.effect){case"scrollx":b(this);this.sprite.css({width:this.sprite.children().length*this.width,left:-this.option.steps*this.width});this.sprite.children().css("float","left");break;case"scrolly":b(this);this.sprite.css({top:-this.option.steps*this.height});
break;case"fade":this.items.css({position:"absolute",zIndex:0}).eq(this.index).css({zIndex:1});break;case"visible":this.items.css({display:"none"}).eq(this.index).css({display:"block"});break}var d=this;var c=setTimeout(function(){clearTimeout(c);d.fire("init")},30)},cutover:function(d){var e=(d==null)?this.option.speed:0;var f=this.index!=this.page?this.index:0;this.trig.eq(f).addClass(this.option.activeClass).siblings().removeClass(this.option.activeClass);switch(this.option.effect){case"visible":this.items.css({display:"none"}).eq(f).css({display:"block"});break;case"fade":this.items.css({position:"absolute",zIndex:0}).fadeOut(e);this.items.eq(f).css({zIndex:1}).fadeIn(e);break;case"scrollx":var b=this.width*this.option.steps;this.sprite.stop().animate({left:-b*this.index-b},e);break;case"scrolly":var c=this.height*this.option.steps;
this.sprite.stop().animate({top:-c*this.index-c},e);break}this.fire("cutover",f)},bindUI:function(){var c=this;var b=0;this.trig.bind(this.option.eventType,function(){var d=this;if(c.option.eventType=="mouseover"||c.option.eventType=="mouseenter"){if(c.index==$(d).index()){return}clearTimeout(b);b=setTimeout(function(){c.index=$(d).index();c.cutover();clearTimeout(b)},c.option.delay)}else{c.index=$(this).index();c.cutover()}});this.btnLast.click(function(){c.lastPage()});this.btnNext.click(function(){c.nextPage()});this.box.bind({mouseenter:function(){c.btnLast.show();c.btnNext.show();clearInterval(c.timer)},mouseleave:function(){c.btnLast.hide();c.btnNext.hide();c.autoPlay()}})},lastPage:function(){this.index--;if(this.index<-1){this.index=this.page-1;this.cutover(0);this.index=this.page-2
}this.cutover()},nextPage:function(){this.index++;if(this.index>this.page){this.index=0;this.cutover(0);this.index=1}this.cutover()},autoPlay:function(){var b=this;if(!this.option.autoPlay){return false}clearInterval(this.timer);this.timer=setInterval(function(){b.nextPage()},this.option.interval)}};window.Switchable=a})();var jsHaigouFed={allsortShowWidth:function(){$(".hg_show_sort").each(function(){var a=$(this).find(".hg_sort_list").length;if(a==1){$(this).addClass("hg_show_narrow")}})},globalTab:function(){$(".hg_global_tab").delegate("a","click",function(){var a=$(this).index();$(this).addClass("cur").siblings().removeClass("cur");$(".tab_detail_item").eq(a).fadeIn().siblings(".tab_detail_item").fadeOut()})},hgYhdSlide:function(k,o,f){var k=$(k),i=k.find(".slide_wrap"),g=i.find(".slide_item"),p=k.find(".show_pre_btn"),d=k.find(".show_next_btn"),e=1198,n=g.length,l=$(".hg_yhd_tabs").find("a"),b,m;g.first().clone().appendTo(i);g.last().clone().prependTo(i);i.css("left",-e);var j=i.find(".slide_item").length/o,a=parseInt(e*(j-1)),c=parseInt(e*(j-2));$(".hg_yhd_tabs").delegate("a","click",function(){var q=$(".hg_yhd_tabs a").index(this);
$(this).addClass("cur").siblings("a").removeClass("cur");i.stop(true,true).animate({left:"-"+(q+1)*e+"px"},360)});k.delegate(".show_next_btn","click",function(){var q=h();i.stop(true,true).animate({left:"-="+e+"px"},360,function(){m=parseInt(i.css("left"));l.eq(q+1).addClass("cur").siblings().removeClass("cur");if(m==-a){i.css("left",-e);l.eq(0).addClass("cur").siblings().removeClass("cur")}})});k.delegate(".show_pre_btn","click",function(){var q=h();i.stop(true,true).animate({left:"+="+e+"px"},360,function(){m=parseInt(i.css("left"));l.eq(q-1).addClass("cur").siblings().removeClass("cur");if(m==0){i.css("left",-c);l.eq(n-1).addClass("cur").siblings().removeClass("cur")}})});function h(){return $("a",".hg_yhd_tabs").index($("a.cur",".hg_yhd_tabs"))}k.hover(function(){p.show();d.show()},function(){p.hide();
d.hide()})},floorHover:function(){$(".pro_wrap").each(function(){$(this).find(".pro_item").eq(2).find(".hover_border").attr("class","hover_border_specia")});$(".pro_wrap").delegate(".pro_item,.big_banner","mouseenter",function(){$(this).addClass("cur")});$(".pro_wrap").delegate(".pro_item,.big_banner","mouseleave",function(){$(this).removeClass("cur")})},newProHover:function(){$(".hg_new_products").delegate("li","mouseenter",function(){$(this).addClass("cur")});$(".hg_new_products").delegate("li","mouseleave",function(){$(this).removeClass("cur")})},loadfun:function(){jsHaigouFed.allsortShowWidth();jsHaigouFed.globalTab();jsHaigouFed.hgYhdSlide(".hg_yhd_silde",1,300);jsHaigouFed.floorHover();jsHaigouFed.newProHover()}};jsHaigouFed.loadfun();function countdownTime(d,e){if(e&&e>=0){var b=e/1000;
var c=Math.floor(b%60);var g=Math.floor((b/60)%60);var a=Math.floor((b/3600)%24);if(a>=0&&a<=9){a="0"+a}if(g>=0&&g<=9){g="0"+g}if(c>=0&&c<=9){c="0"+c}var f="<em>"+a+"</em><span>"+g+"</span><i>"+c+"</i>";d.html(f);if(a==0&&g==0&&c==0){window.location.reload()}else{setTimeout(function(){countdownTime(d,e-1000)},1000)}}}function limitBuyProductAjaxInit(){var a=$("#xpsj").attr("promotionId");if(!a){return}var c="http://gps.yhd.com/restful/promotion";if(currProvinceId){currProvinceId=1}var e="?mcsite=1&provinceId="+currProvinceId+"&promotionIds="+a;var b=-1;var d=0;jQuery.getJSON(c+e+"&callback=?",function(i){if(!i||i.ERROR){return}var f=-1;var h=0;jQuery.each(i,function(l,n){b=n.status;var q=$("#prod_"+n.pId);var p=q.attr("mId");if(p==n.mId){q.find("#xpsjPromPrice").html(n.promPrice);q.find("#xpsyYhdPrice").html(n.yhdPrice)
}var m=$(".count_down_time");var o=$(".count_down_text");if(b==1){f=1;h=n.remainTime;if(n.canBuyNum==0){$(".buy_btn",q).html("抢光了");$(".buy_btn",q).removeClass("buy_btn").addClass("out_btn")}}else{if(b==0){$(".buy_btn",q).html("10点开抢");f=0;h=n.readyTime}else{if(b==2){$(".buy_btn",q).html("抢光了");$(".buy_btn",q).removeClass("buy_btn").addClass("out_btn");f=2}}}});var g=$(".count_down_time");var k=$(".count_down_text");if(f==1){k.html("距离抢购结束还有：");countdownTime(g,h)}else{if(f==0){k.html("距离抢购开始还有：");countdownTime(g,h)}else{if(f==2){k.html("明天10点开抢");var j="<em>00</em><span>00</span><i>00</i>";g.html(j)}}}})}function djs(){var b=$(".count_down_time");var e=$(".count_down_text");var a=$(".count_down").attr("remainTime");var c=$(".count_down").attr("startRemainTime");if(a&&a!=NaN&&a>0){e.html("距离抢购结束还有：");
countdownTime(b,a)}if(c&&c!=NaN&&c>0){countdownTime(b,c);e.html("距离抢购开始还有：")}if(a&&a!=NaN&&a<=0){e.html("明天10点开抢");var d="<em>00</em><span>00</span><i>00</i>";b.html(d)}}function busystockLazy(){var a=jQuery("[priceDomId]");if(currProvinceId){currProvinceId=1}if(a.length<1){return}var d="";var c={};a.each(function(e){var g=$(this);var f=g.attr("priceDomId");if(!c[f]){c[f]=[];c[f].push({elem:g});d+="&pmIds="+f}else{c[f].push({elem:g})}g.removeAttr("priceDomId")});if(d==""){return}var b="http://gps.yhd.com/restful/promotion?mcsite=1&provinceId="+currProvinceId+d+"&callback=?";jQuery.getJSON(b,function(e){if(!e||e.ERROR){return true}jQuery.each(e,function(h,j){var f=j.promPrice;var g=j.marketPrice;var l=j.pmId;var k=c[l];jQuery.each(k,function(o,r){var q=r.elem;var n=q.find("#price");var p=q.find("#refPrice");
var m=q.find("#marPriceSpan");if(n){n.html(j.price)}if(m){if(j.promPrice>=j.marketPrice){m.css("visibility","hidden")}p.html(j.marketPrice)}})})})}function search(){$("#hd_search_haigou").css("display","block");$("#hd_search_haigou").click(function(){var a=$("#keyword").val();if(a==""||a=="请输入关键词"){return}if(a){location.href="http://search.yhd.com/c0-0-0/b/a-s1-v4-p1-price-d0-fc-m1-rt0-pid-mid0-k"+a+"/"}})}var swit=new Switchable({container:".mod_promo_show",content:".promo_wrapper ul",pageButton:[".show_pre",".show_next"],trigger:".mod_promonum_show ol",effect:"fade",activeClass:"cur",interval:5000,autoPlay:true});$(document).ready(function(){limitBuyProductAjaxInit();busystockLazy();search()});